const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/slidev/shiki-Cwiv2waZ.js","assets/monaco/bundled-types-D38EX5Mw.js","assets/modules/vue-ili5zS5B.js","assets/modules/file-saver-igGfcqei.js","assets/monaco/bundled-types-ZmSvKqDd.css","assets/modules/shiki-CKj17wTN.js","assets/modules/shiki-BPvBenZD.css"])))=>i.map(i=>d[i]);
import{O as M}from"../modules/unplugin-icons-hQGhC-4O.js";import{t as w,d as P,G as L,o as a,b as c,ac as D,z as F,V as H,S as J,aH as z,U,E as q,af as G,ax as K,e as W,x as j,I as x,F as k,ah as T,c as Y,i as Q,g as A,aI as X,h as Z,l as B,k as ee}from"../modules/vue-ili5zS5B.js";import{l as te,_ as V,k as ne,n as E}from"../monaco/bundled-types-D38EX5Mw.js";import{u as re}from"./context-BLfhSwS_.js";import{a1 as se,a as oe,Y as ie}from"../index-D4dyZXyh.js";import{_ as ae}from"./IconButton.vue_vue_type_script_setup_true_lang-DE2jkamO.js";import"../modules/file-saver-igGfcqei.js";import"../modules/shiki-CKj17wTN.js";const N={},ce=se(()=>({async python(s){return await le(s)}}));async function le(s){try{const n=await fetch("https://godbolt.org/api/compiler/python312/compile",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({source:s,options:{compilerOptions:{executorRequest:!0},executeParameters:{}}})});if(!n.ok)return{error:`Bad response: ${n.statusText}`};const d=await n.json(),o=d.stdout.map(i=>({text:i.text.replace(/\s/g,"‎ ").replace(/\t/g,"‎    ")})),l=d.stderr.map(i=>({text:i.text.replace(/\s/g,"‎ ").replace(/\t/g,"‎    "),class:"text-red-500"}));return l.length!==0?l:o.length!==0?o:{text:"No output received"}}catch(t){return console.error("Failed to execute Python code:",t),{error:`Failed to execute Python code: ${t.message}`}}}const ue=[ce],pe=te(async()=>{const s={javascript:C,js:C,typescript:C,ts:C},{getHighlighter:t}=await V(async()=>{const{getHighlighter:o}=await import("./shiki-Cwiv2waZ.js");return{getHighlighter:o}},__vite__mapDeps([0,1,2,3,4,5,6])),n=await t(),d=async(o,l,i)=>{try{const m=s[l];if(!m)throw new Error(`Runner for language "${l}" not found`);return await m(o,{options:i,highlight:n,run:async(e,r)=>await d(e,r,i)})}catch(m){return console.error(m),{error:`${m}`}}};for(const o of ue){const l=await o(s);Object.assign(s,l)}return{highlight:n,run:d}});function de(s){const t=w([]),n=e=>t.value.push({error:String(e)}),d=(...e)=>t.value.push(e.map(l)),o=Object.assign({},console);o.info=o.log=o.debug=o.warn=o.error=d,o.clear=()=>t.value.length=0;try{const e=`return async (console, __slidev_import, __slidev_on_error) => {
      try {
        ${m(s)}
      } catch (e) {
        __slidev_on_error(e)
      }
    }`;new Function(e)()(o,r=>{const p=N[r];if(!p)throw new Error(`Module not found: ${r}.
Available modules: ${Object.keys(N).join(", ")}. Please refer to https://sli.dev/custom/config-code-runners#additional-runner-dependencies`);return p},n)}catch(e){n(e)}function l(e){return typeof e=="string"?{text:e}:{text:i(e),highlightLang:"javascript"}}function i(e){var p;let r="";if(e instanceof Error)r=`Error: ${JSON.stringify(e.message)}`;else if(e==null||typeof e=="symbol")r=String(e);else if(Array.isArray(e))r=`[${e.map(i).join(", ")}]`;else if(e instanceof Set){const u=[...e];r=`Set (${e.size}) {${u.map(i).join(", ")}}`}else if(e instanceof Map){const u=[...e.entries()];r=`Map (${e.size}) {${u.map(([f,h])=>`${i(f)} => ${i(h)}`).join(", ")}}`}else if(e instanceof RegExp)r=e.toString();else if(typeof e=="string")r=JSON.stringify(e);else if(typeof e=="object"){const u=((p=e.constructor)==null?void 0:p.name)??"",f=u&&u==="Object"?"":u;r=(f?`${f}: `:"")+JSON.stringify(e,(y,_)=>_===void 0?"__undefined__":_,2).replace(/"__undefined__"/g,"undefined"),r=String(r)}else r=String(e);return r}function m(e){return e=e.replace('import "reflect-metadata"',"").replace('require("reflect-metadata")',""),e=e.replace("export {};",""),e}return t}let O;async function C(s){O??(O=await V(()=>import("../monaco/bundled-types-D38EX5Mw.js").then(n=>n.t),__vite__mapDeps([1,2,3,4]))),s=O.transpileModule(s,{compilerOptions:{module:O.ModuleKind.ESNext,target:O.ScriptTarget.ES2022},transformers:{after:[me]}}).outputText;const t=/import\s*\((.+)\)/g;return s=s.replace(t,(n,d)=>`__slidev_import(${d})`),de(s)}function me(s){const{factory:t}=s,{isImportDeclaration:n,isNamedImports:d,NodeFlags:o}=O;return l=>{var m,e;const i=[...l.statements];for(let r=0;r<i.length;r++){const p=i[r];if(!n(p))continue;let u;const f=(m=p.importClause)==null?void 0:m.namedBindings,h=[];if((e=p.importClause)!=null&&e.name&&h.push(t.createBindingElement(void 0,t.createIdentifier("default"),p.importClause.name)),f)if(d(f)){for(const _ of f.elements)h.push(t.createBindingElement(void 0,_.propertyName,_.name));u=t.createObjectBindingPattern(h)}else u=t.createIdentifier(f.name.text);else u=t.createObjectBindingPattern(h);const y=t.createVariableStatement(void 0,t.createVariableDeclarationList([t.createVariableDeclaration(u,void 0,void 0,t.createAwaitExpression(t.createCallExpression(t.createIdentifier("import"),void 0,[p.moduleSpecifier])))],o.Const));i[r]=y}return t.updateSourceFile(l,i)}}const fe=P({__name:"DomElement",props:{element:{}},setup(s){const t=s,n=w();return L(()=>{n.value&&n.value.appendChild(t.element)}),(d,o)=>(a(),c("div",{ref_key:"container",ref:n},null,512))}}),he={key:0,class:"text-sm text-center opacity-50"},_e={key:1,class:"text-sm text-center opacity-50"},ge={key:2,class:"text-sm text-center opacity-50"},ye=["innerHTML"],ve={key:1,class:"text-red-500"},xe={key:3,class:"output-line"},we=["innerHTML"],Se={key:2,class:"separator"},be={key:0,class:"absolute right-1 top-1 max-h-full flex gap-1"},Ae=P({__name:"CodeRunner",props:{modelValue:{},lang:{},autorun:{type:[Boolean,String]},height:{},showOutputAt:{type:[null,Boolean,String,Number,Array]},highlightOutput:{type:Boolean},runnerOptions:{}},emits:["update:modelValue"],setup(s,{emit:t}){const n=s,d=t,{isPrintMode:o}=oe(),l=D(n,"modelValue",d),{$renderContext:i,$clicksContext:m}=re(),e=F(()=>!["slide","presenter"].includes(i.value)),r=o.value?"once":n.autorun,p=w(r),u=H(),f=w(0),h=w(),y=w(n.showOutputAt);if(n.showOutputAt){const S=ie();J(()=>{const v=m.calculate(n.showOutputAt);v?(m.register(S,v),z(()=>{y.value=!v.isActive.value})):y.value=!1}),U(()=>m.unregister(S))}const _=ne(200,async()=>{if(e.value)return;const{highlight:S,run:v}=await pe();h.value=S;const $=setTimeout(()=>{p.value=!0},500);u.value=await v(l.value,n.lang,n.runnerOptions??{}),f.value+=1,p.value=!1,clearTimeout($)});return r==="once"?_():r&&q(l,_,{immediate:!0}),(S,v)=>{const $=M;return a(),c(k,null,[G(W("div",{class:"relative flex flex-col rounded-b border-t border-main",style:Z({height:n.height}),"data-waitfor":".slidev-runner-output"},[e.value?(a(),c("div",he,' Code is disabled in the "'+j(x(i))+'" mode ',1)):p.value?(a(),c("div",_e," Running... ")):u.value?(a(),c("div",{key:`run-${f.value}`,class:"slidev-runner-output"},[(a(!0),c(k,null,T(x(E)(X(u.value)),(g,I)=>(a(),c(k,{key:I},["html"in g?(a(),c("div",{key:0,innerHTML:g.html},null,8,ye)):"error"in g?(a(),c("div",ve,j(g.error),1)):"element"in g?(a(),Y(fe,{key:2,element:g.element},null,8,["element"])):(a(),c("div",xe,[(a(!0),c(k,null,T(x(E)(g),(b,R)=>(a(),c(k,{key:R},[b.highlightLang&&h.value?(a(),c("span",{key:0,class:"highlighted",innerHTML:h.value(b.text,b.highlightLang)},null,8,we)):(a(),c("span",{key:1,class:Q(b.class)},j(b.text),3)),R<x(E)(g).length-1?(a(),c("span",Se,",")):A("v-if",!0)],64))),128))]))],64))),128))])):(a(),c("div",ge," Click the play button to run the code "))],4),[[K,!y.value]]),x(l).trim()?(a(),c("div",be,[B(ae,{class:"w-8 h-8 max-h-full flex justify-center items-center",title:"Run code",onClick:x(_)},{default:ee(()=>[B($)]),_:1},8,["onClick"])])):A("v-if",!0)],64)}}});export{Ae as default};
